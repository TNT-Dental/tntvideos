/* get device */
function getOS(){var i=navigator.userAgent||navigator.vendor||window.opera;return i.match(/iPad/i)||i.match(/iPhone/i)||i.match(/iPod/i)?"iOS":i.match(/Android/i)?"Android":"unknown"}

/* retrive youtube video */
jQuery.fn.setupYoutube=function(){iframe=document.createElement("iframe"),iframe.setAttribute("frameborder","0"),iframe.setAttribute("allowfullscreen",""),iframe.setAttribute("width",this.attr("data-width")),iframe.setAttribute("height",this.attr("data-height")),iframe.setAttribute("src","https://www.youtube.com/embed/"+this.attr("data-embed")+"?rel=0&autoplay=1&playsinline=1&enablejsapi=1"),this.prepend(iframe);var e=iframe.height/iframe.width*100;iframe.style.position="absolute",iframe.style.top="0",iframe.style.left="0",iframe.style.right="0",iframe.width="100%",iframe.height="100%";var t=document.createElement("div");t.className="fluid-vid",t.style.width="100%",t.style.position="relative",t.style.paddingTop=e+"%",iframe.parentNode.insertBefore(t,iframe),t.appendChild(iframe)};

/* tntvideos */
!function(e){e.fn.extend({tntvideos:function(t){var a={youtube:!0,youtubeClass:".youtube",playButton:".play",closeButton:".close",animate:!0,offset:e("header").outerHeight(),bodyPlaying:null,mobileWidth:900};if(1==(t=e.extend(a,t)).youtube){var i=t.youtubeClass;e(i).each(function(){e(this).is(":empty")&&e(this).empty().append('<img alt="youtube thumbnail" class="thumbnail" src="https://img.youtube.com/vi/'+e(this).data("embed")+'/maxresdefault.jpg">'),e(this).on("click",function(){e(this).find(".thumbnail").remove();for(var t=0;t<e("iframe").length;t++)e("iframe")[t].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");e(this).addClass("active").setupYoutube()})})}return this.each(function(){var a=t;if(e(window).width()>a.mobileWidth&&(e(this).find(".thumbnail").remove(),e(this).find("[data-embed]").prepend('<video autoplay="true" muted="muted" loop="true" src="https://player.vimeo.com/external/'+e(this).data("vimeo")+'&profile_id=174"></video>')),e(window).width()<a.mobileWidth){e(this).parents("[data-vimeo]").find("[data-embed]").data("player");e(this).find(a.playButton).appendTo("[data-vimeo] [data-embed]")}e(this).on("click",a.playButton,function(){var t=a.closeButton.replace(/\./g,""),i=e(this).parents("[data-vimeo]"),n=i.find("[data-embed]").data("player");null!=a.bodyPlaying&&e("body").addClass(a.bodyPlaying.replace(/\./g,"")),i.find(a.playButton).hide(),"vimeo"==n?(i.addClass("playing").find("[data-embed]").append('<a class="'+t+'"><i class="icon-plus"></i> Close Video</a>'),o(i)):(i.addClass("playing").find("[data-embed]").append('<a class="'+t+'"><i class="icon-plus"></i> Close Video</a>').setupYoutube(),i.find("video, .thumbnail").hide()),e(window).width()>a.mobileWidth&&1==a.animate&&e("html, body").animate({scrollTop:i.find("[data-embed]").offset().top-a.offset},1e3);for(var d=0;d<e("iframe").length;d++)e("iframe")[d].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");return!1}),e(this).on("click",a.closeButton,function(){var t=e(this).parents("[data-vimeo]");return t.removeClass("playing").find(".fluid-vid, iframe").remove(),t.find(a.closeButton).remove(),t.find("video, .thumbnail").show(),t.find(a.playButton).show(),null!=a.bodyPlaying&&e("body").removeClass(a.bodyPlaying.replace(/\./g,"")),"vimeo"==t.find("[data-embed]").data("player")&&o(t),1==a.animate&&e("html, body").animate({scrollTop:t.offset().top-a.offset},1e3),!1})});function o(e){var t=e.find("video");e.hasClass("playing")?(t.attr({controls:"false",muted:"true",loop:"true"}),t[0].muted=1):(t.attr({controls:"true",muted:"false",loop:"false"}),t[0].currentTime=0,t[0].muted=0,t[0].controls=0)}}})}(jQuery);
